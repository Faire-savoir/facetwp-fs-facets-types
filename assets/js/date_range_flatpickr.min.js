!function(a){a(document).on("facetwp-loaded",function(){a(".facetwp-type-date_range_flatpickr").each(function(){var t=a(this),e=t.attr("data-name"),r={altInput:!0,altInputClass:"flatpickr-alt",altFormat:FWP.settings[e].format,disableMobile:!1,locale:FWP_JSON.date_range_flatpickr.locale,minDate:"today",mode:"range",onChange:function(a,e,r){a.length>1&&(t.find(".facetwp-date-min").attr("value",flatpickr.formatDate(a[0],"Y-m-d")),t.find(".facetwp-date-max").attr("value",flatpickr.formatDate(a[1],"Y-m-d")),FWP.auto_refresh&&FWP.autoload())},onReady:function(e,r,n){var l=t.find(".facetwp-date-max").attr("value");""!=l&&(l=flatpickr.parseDate(l,"Y-m-d"),e.push(l),n.setDate(e));var c='<div class="flatpickr-clear">'+FWP_JSON.date_range_flatpickr.clearText+"</div>";a(c).on("click",function(){n.clear(),t.find(".facetwp-date-max").attr("value",""),n.close(),FWP.auto_refresh&&FWP.autoload()}).appendTo(a(n.calendarContainer))}};t.find('.facetwp-date-min:not(".ready, .flatpickr-alt")').each(function(){var t=FWP.hooks.applyFilters("facetwp/set_options/date_range_flatpickr",r,{facet_name:e,element:a(this)});new flatpickr(this,t),a(this).addClass("ready")})})}),FWP.hooks.addFilter("facetwp/selections/date_range_flatpickr",function(t,e){var r="",n=e.selected_values,l=a(e.el[0]).attr("data-name"),c=FWP.settings[l].format;return""!==n[0]&&(r+=" "+flatpickr.formatDate(flatpickr.parseDate(n[0],"Y-m-d"),c)),""!==n[1]&&n[0]!==n[1]&&(r+=" "+flatpickr.l10ns[FWP_JSON.date_range_flatpickr.locale].rangeSeparator+" "+flatpickr.formatDate(flatpickr.parseDate(n[1],"Y-m-d"),c)),r}),FWP.hooks.addAction("facetwp/refresh/date_range_flatpickr",function(a,t){var e=a.find(".facetwp-date-min").val()||"",r=a.find(".facetwp-date-max").val()||"";FWP.facets[t]=""!==e||""!==r?[e,r]:[]})}(jQuery);
